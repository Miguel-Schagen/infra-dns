- hosts: localhost
  user: super_user
  become: yes
  vars_files:
    - [ "vars.yml" ]
  roles:
    - role: packages
      vars:
        package_name: DNS
        packages:
            - bind9
            - bind9utils
            - bind9-doc
    - role: dns
    - role: ns1
      when: inventory_hostname == "127.0.0.1"
      # when: hostvars[inventory_hostname]['ansible_default_ipv4']['address'] == '10.128.10.11'
      vars:
        # interface_no: hostvars[inventory_hostname]['ansible_default_ipv4']['address']
        interface_no: enx0040f498cffb
        ns1_ip: 10.128.10.11
    - role: ns2
      when: inventory_hostname == "ns2"
      # when: hostvars[inventory_hostname]['ansible_default_ipv4']['address'] == '10.128.10.11'
      vars:
        # interface_no: hostvars[inventory_hostname]['ansible_default_ipv4']['address']
        interface_no: enx0040f4973f9a
        ns1_ip: 10.128.10.11
    - role: netplan
      when: inventory_hostname == "127.0.0.1"
      # when: hostvars[inventory_hostname]['ansible_default_ipv4']['address'] == '10.128.10.11'
      vars:
        dns_zone: net1.domain
        # interface_no: hostvars[inventory_hostname]['ansible_default_ipv4']['address']
        interface_no: enx0040f498cffb
        interface_ip: 10.128.10.11
        interface_mask: 16
        ns1_ip: 10.128.10.11
        ns2_ip: 10.128.20.12
    - role: netplan
      when: inventory_hostname == "ns2"
      # when: hostvars[inventory_hostname]['ansible_default_ipv4']['address'] == '10.128.20.12'
      vars:
        dns_zone: net1.domain
        # interface_no: hostvars[inventory_hostname]['ansible_default_ipv4']['address']
        interface_no: enx0040f4973f9a
        # interface_no: enx0040f4a613c7
        interface_ip: 10.128.20.12
        interface_mask: 16
        ns1_ip: 10.128.10.11
        ns2_ip: 10.128.20.12
    - role: dns-restart
    # - role: resolv
    #   when: inventory_hostname == "127.0.0.1"
    #   vars:
    #     dns_zone: net1.domain
    #     interface_no: enx0040f498cffb
    #     ns1_ip: 10.128.10.11
    #     ns2_ip: 10.128.20.12
    # - role: resolv
    #   when: inventory_hostname == "ns2"
    #   vars:
    #     dns_zone: net1.domain
    #     interface_no: enx0040f4973f9a
    #     ns1_ip: 10.128.10.11
    #     ns2_ip: 10.128.20.12
    - role: packages
      vars:
        package_name: PGP/GPG/OpenPGP
        packages:
            # - OpenPGP Applet
            # - constellation
    - role: packages
      vars:
        package_name: network tools
        packages:
           - inetutils-traceroute
           - net-tools
           - ethtool
           - gnome-network-admin
           - network-manager
           - network-manager-gnome
    - role: packages
      vars:
        package_name: S/MIME & SSL
        packages:
           - ssh
    - role: packages
      vars:
        package_name: rsync
        packages:
           - rsync
           - grsync
    - role: packages
      vars:
        package_name: desktop
        packages:
            - chromium-browser
            - evolution
            - thunderbird
    - role: packages
      when: inventory_hostname == "127.0.0.1"
      vars:
        package_name: desktop-codecses
        packages:
            - chromium-codecs-ffmpeg-extra
            - chromium-codecs-ffmpeg
            - gstreamer1.0-plugins-base-apps
            - gstreamer1.0-plugins-good
            - gstreamer1.0-plugins-bad-apps
            - gstreamer1.0-opencv
            - gstreamer1.0-wpe
            - gnome-twitch-player-backend-gstreamer-cairo
            - gnome-twitch-player-backend-gstreamer-clutter
            - gnome-twitch-player-backend-gstreamer-opengl
    - role: packages
      vars:
        package_name: libreoffice
        packages:
            - libreoffice
            - libreoffice-base
            - libreoffice-sdbc-mysql
            - libreoffice-sdbc-postgresql
            - libreoffice-evolution
            - libreoffice-l10n-nl
            - libreoffice-pdfimport
            - libreoffice-dev-doc
            - libreoffice-dev
            - libreofficekit-data
            - libreofficekit-dev
            - libreoffice-avmedia-backend-gstreamer
    - role: packages
      vars:
        package_name: desktop-gnome
        packages:
            - unzip
            - gnome
            - gnome-shell
            - gnome-shell-extensions
            - gnome-shell-extension-prefs
            - gnome-shell-extension-autohidetopbar
            - gnome-shell-extension-gsconnect
            # - gnome-shell-extension-openweather
            - chrome-gnome-shell
    - role: packages-remove
      vars:
        package_name: desktop-gnome-remove-games
        packages:
            - aisleriot
            - five-or-more
            - four-in-a-row
            - gnome-klotski
            - hitori
            - gnome-mines
            - gnome-nibbles
            - gnome-robots
            - gnome-sudoku
            - gnome-taquin
            - gnome-tetravex
            - lightsoff
            - quadrapassel
            - swell-foop
            - tali
    # @todo install following role
    - role: PeterMosmans.customize-gnome
      vars:
        gnome_user: noud
        gnome_extensions:
          - id: 1139 # apt-update-indicator
          - id: 2197 # new-apt-update-indicator
          - id: 945 # cpu-power-manager
          - id: 82 # cpu-temperature-indicator
          - id: 307 # dash-to-dock
          - id: 1036 # extensions
          - id: 1166 # extension-update-notifier
          - id: 750 # openweather
          - id: 836 # internet-radio
          - id: 1247 # gnome-radio
          - id: 921 # multi-monitors-add-on
          - id: 104 # netspeed
          - id: 941 # show-ip
          - id: 906 # sound-output-device-chooser
          - id: 9 # systemmonitor
          - id: 365 # transmission-daemon-indicator
        gnome_dconf:
          - key: /org/gnome/desktop/background/show-desktop-icons
            value: "true"
          - key: /org/gnome/shell/development-tools
            value: "true"
          # - key: /org/gnome/shell/enabled-extensions
          #   value: ['new-apt-update-indicator@hamburgerjungejr', 'cpupower@mko-sl.de', 'extensions@abteil.org', 'openweather-extension@jenslody.de', 'radio@hslbck.gmail.com', 'gnome-radio@gnome-shell-exstensions.fffilo.github.com', 'netspeed@hedayaty.gmail.com']
    - role: packages
      vars:
        package_name: IM
        packages:
            - pidgin
      community.general.snap:
        name:
          - whatsdesk
          - yakyak
    - role: packages
      community.general.snap:
        name: skype
        classic: yes
    - role: packages
      when: ansible_facts['os_family'] == 'Debian'
      vars:
        package_name: APT
        packages:
            - software-properties-common
            - apt-transport-https
    - role: repo_apt_add
      vars:
        repo_name: vscode
        repo_key_url: https://packages.microsoft.com/keys/microsoft.asc
        repo: https://packages.microsoft.com/repos/vscode
    - role: packages
      vars:
        package_name: developer
        packages:
            - code
#            - cpp-dependencies
            - graphviz
      community.general.snap:
        name:
          - cmake
    - role: packages
      vars:
        package_name: kernel-developer
        packages:
            # - linux-headers-$(uname -r)
            - ncurses-dev
            # - kernel-package
            # - qt4-dev-tools
            - pkg-config
            - build-essential
    # make menuconfig and make xconfig
    - role: packages
      vars:
        package_name: ansible-developer
        packages:
            - build-essential
            - libssl-dev
            - libffi-dev
            - python3-dev
    - role: packages
      vars:
        package_name: mp4
        packages:
            - vlc
            - ubuntu-restricted-extras
    - role: packages
      vars:
        package_name: pdf
        packages:
            - gimp
            - inkscape
    - role: packages
      vars:
        package_name: broadband
        packages:
            - cu
            - minicom
      community.general.snap:
        name:
          - modem-manager
    - role: docker-compose
    #  systemctl status snap.modem-manager.modemmanager.service 
    
    # sudo apt install pythonpy

    # sudo pip install pythonpy libusb1
    # echo "alias py='pythonpy'" >> ~/.bashrc
    # /home/noud/.local/bin/py:16: DeprecationWarning: Using or importing the ABCs from 'collections' instead of from 'collections.abc' is deprecated since Python 3.3, and in 3.9 it will stop working
